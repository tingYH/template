<div class="main-content">
    <div class="main-content-inner">
        <div class="page-content">
            <div class="page-header noPrint">
                <h1>
                    連鎖交易管理
                    <i class="ace-icon fa fa-angle-double-right"></i>
                    出貨單列表
                    <i class="ace-icon fa fa-angle-double-right"></i>
                    出貨單明細
                </h1>
            </div>

            <div class="row margin_top noPrint">
                <div class="col-xs-12 col-sm-12 widget-container-col">
                    <div class="widget-box widget-color-black" id="widget-box-9">
                        <div class="widget-header">
                            <h5 class="widget-title">出貨單明細</h5>
                            <div class="widget-toolbar noPrint">
                                <a href="" data-action="collapse">
                                    <i class="1 ace-icon fa fa-chevron-up bigger-125"></i>
                                </a>
                            </div>
                            <div class="widget-toolbar no-border noPrint"></div>
                        </div>
                        <div class="widget-body">
                            <div class="widget-main">
                                <div class="row margin_top">
                                    <div class="col-xs-6 col-sm-6 widget-container-col">
                                        <div class="form-group">
                                            <label class="col-sm-3 control-label no-padding-right">
                                                購買店家：
                                            </label>
                                            <div class="col-sm-9">
                                                <label class="control-label no-padding-right">
                                                    {{order.orders.vendorNameBuyer}}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xs-6 col-sm-6 widget-container-col">
                                        <div class="form-group">
                                            <label class="col-sm-3 control-label no-padding-right">
                                                地址：
                                            </label>
                                            <div class="col-sm-9">
                                                <label class="control-label no-padding-right">
                                                    {{order.orders.address}}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row margin_top">
                                    <div class="col-xs-6 col-sm-6 widget-container-col">
                                        <div class="form-group">
                                            <label class="col-sm-3 control-label no-padding-right">
                                                電話：
                                            </label>
                                            <div class="col-sm-9">
                                                <label class="control-label no-padding-right">
                                                    {{order.orders.tel}}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xs-6 col-sm-6 widget-container-col">
                                        <div class="form-group">
                                            <label class="col-sm-3 control-label no-padding-right">
                                                負責人：
                                            </label>
                                            <div class="col-sm-9">
                                                <label class="control-label no-padding-right">
                                                    {{order.ownerName}}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row margin_top">
                                    <div class="col-xs-6 col-sm-6 widget-container-col">
                                        <div class="form-group">
                                            <label class="col-sm-3 control-label no-padding-right">
                                                統編 :
                                            </label>
                                            <div class="col-sm-9">
                                                <label class="control-label no-padding-right">
                                                    {{order.orders.taxId}}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xs-6 col-sm-6 widget-container-col">
                                        <div class="form-group">

                                        </div>
                                    </div>
                                </div>

                                <div class="row margin_top">
                                    <div class="col-xs-6 col-sm-6 widget-container-col">
                                        <div class="form-group">
                                            <label class="col-sm-3 control-label no-padding-right">
                                                訂單編號：
                                            </label>
                                            <div class="col-sm-9">
                                                <label class="control-label no-padding-right">
                                                    {{order.orders.orderCode}}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row margin_top">
                                    <div class="col-xs-6 col-sm-6 widget-container-col">
                                        <div class="form-group">
                                            <label class="col-sm-3 control-label no-padding-right">
                                                物流單號：
                                            </label>
                                            <div class="col-sm-9">
                                                <input type="text" />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xs-6 col-sm-6 widget-container-col">
                                        <div class="form-group">
                                            <label class="col-sm-3 control-label no-padding-right">
                                                派車/物流選擇：
                                            </label>
                                            <div class="col-sm-9">
                                                <select class=" " ng-model="order.orders.deliveryType"
                                                    ng-options="delivery.deliveryId as delivery.deliveryName for delivery in order.delivery">
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row margin_top">
                                    <div class="col-xs-6 col-sm-6 widget-container-col">
                                        <div class="form-group">
                                            <label class="col-sm-3 control-label no-padding-right">
                                                下單日期：
                                            </label>
                                            <label class="col-sm-9 control-label no-padding-right">
                                                {{order.orders.creationDate | date: "yyyy-MM-dd"}}
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-xs-6 col-sm-6 widget-container-col">
                                        <div class="form-group">
                                            <label class="col-sm-3 control-label no-padding-right">
                                                預計出貨時間：
                                            </label>
                                            <label class="col-sm-9 control-label no-padding-right">
                                                <div class="form-group">
                                                    <div class='input-group date datepicker' ng-disabled="edit_disabled"
                                                        ng-model="order.orders.expectDeliveryTime"
                                                        data-provide="datepicker" data-date-today-highlight="true">
                                                        <input type='text' class="form-control" id="expectDeliveryTime"
                                                            ng-disabled="edit_disabled" />
                                                        <span class="input-group-addon"> <span
                                                                class="fa fa-calendar"></span></span>
                                                    </div>
                                                </div>

                                            </label>
                                            <label class="col-sm-2 control-label no-padding-right">
                                                時段：
                                            </label>
                                            <select class=" col-sm-4" ng-model="order.orders.expectDeliveryHour"
                                                convert-to-number>
                                                <option value="0">不限時段</option>
                                                <option value="1">早上</option>
                                                <option value="2">下午</option>
                                                <option value="3">晚上</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="row margin_top">
                                    <div class="col-xs-6 col-sm-6 widget-container-col">
                                        <div class="form-group">
                                            <label class="col-sm-3 control-label no-padding-right">
                                                下單姓名：
                                            </label>
                                            <div class="col-sm-9">
                                                <label class="control-label no-padding-right">
                                                    {{ order.createdName }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xs-6 col-sm-6 widget-container-col"
                                        ng-if="order.orders.createdBy != order.orders.updatedBy">
                                        <div class="form-group">
                                            <label class="col-sm-3 control-label no-padding-right">
                                                修改人姓名：
                                            </label>
                                            <div class="col-sm-9">
                                                <label class="control-label no-padding-right">
                                                    {{ order.createdName }}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row margin_top">
                                    <div class="col-xs-12 col-sm-12 widget-container-col">
                                        <table class="table table-striped table-bordered dataTable">
                                            <tbody>
                                                <tr>
                                                    <th width="8%">產品代號</th>             
                                                    <th width="15%">產品名稱</th>
                                                    <th width="10%">單價</th>
                                                    <th width="10%">訂購數量</th>
                                                    <!-- <th width="10%">訂購數量</th> -->
                                                    <th class="noPrint" width="8%">出貨數量</th>
                                                    <th class="noPrint" width="8%">結帳數量</th>
                                                    <th width="7%">小計</th>
                                                </tr>
                                                <tr ng-repeat="product in order.orderDetailList">
                                                    <td>{{product.productCode}}</td>  
                                                    <td>{{product.productName}}</td>
                                                    <td>
                                                        <input type="text" min="0" step="1"
                                                            value="{{product.price | number:0}}"
                                                            class="speedorder-price" />/{{product.paymentUnit}}
                                                    </td>
                                                    <td>
                                                        <input type="number" style="width:70px"
                                                            ng-model="product.quantity" />
                                                        <span ng-show="product.isPaymentUnit == 0">
                                                            {{product.paymentUnit}}</span>
                                                        <span ng-show="product.isPaymentUnit == 1" style="color: red;">
                                                            {{product.orderUnit}}</span>
                                                    </td>
                                                    <td class="noPrint">
                                                        <input type="number" style="width:50px"
                                                            ng-model="product.quantityShip" />
                                                    </td>
                                                    <td> <input type="number" style="width:70px"
                                                            ng-model="product.quantityPayment" />{{product.paymentUnit}}
                                                    </td>
                                                    <td>
                                                        <input type="text" min="0" step="1" class="speedorder-price"
                                                            value="{{ product | productTotal | number:0}}" disabled />
                                                    </td>
                                                </tr>
                                            </tbody>
                                            <tr>
                                                <td colspan="12">
                                                    <div class="col-xs-11 col-sm-7 widget-container-col">
                                                        <div class="form-group"></div>
                                                    </div>
                                                    <div class="col-xs-1 col-sm-5 widget-container-col">
                                                        <div class="form-group">
                                                            <label class="col-sm-4 control-label no-padding-right">

                                                            </label>
                                                            <label class="col-sm-4 control-label no-padding-right">
                                                                小計：
                                                            </label>
                                                            <div class="col-sm-4 speedorder-price">
                                                                <label class="control-label no-padding-right">
                                                                    {{ order.orderDetailList | subTotal| number:0 }}
                                                                </label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td colspan="12">
                                                    <div class="col-xs-11 col-sm-7 widget-container-col">
                                                        <div class="form-group"></div>
                                                    </div>
                                                    <div class="col-xs-1 col-sm-5 widget-container-col">
                                                        <div class="form-group">
                                                            <label class="col-sm-4 control-label no-padding-right">

                                                            </label>
                                                            <label class="col-sm-4 control-label no-padding-right">
                                                                稅額：
                                                            </label>
                                                            <div class="col-sm-4 speedorder-price">
                                                                <label class="control-label no-padding-right">
                                                                    {{ order.orderDetailList | taxRateTotal | number:0}}
                                                                </label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td colspan="12">
                                                    <div class="col-xs-11 col-sm-7 widget-container-col">
                                                        <div class="form-group"></div>
                                                    </div>
                                                    <div class="col-xs-1 col-sm-5 widget-container-col">
                                                        <div class="form-group">
                                                            <label style="color: red;"
                                                                class="col-sm-4 control-label  no-padding-right">

                                                            </label>
                                                            <label class="col-sm-4 control-label no-padding-right">
                                                                訂單總計：
                                                            </label>
                                                            <div class="col-sm-4 speedorder-price">
                                                                <label class="control-label no-padding-right">
                                                                    {{ order.orderDetailList | total | number:0}}
                                                                </label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                                <div class="row margin_top">
                                    <div class="col-xs-6 col-sm-6 widget-container-col">
                                        <div class="form-group">
                                            <label class="col-sm-3 control-label no-padding-right">
                                                購買店家留言：
                                            </label>
                                            <div class="col-sm-9">
                                                <label class="control-label no-padding-right">
                                                    {{order.orders.messageBuyer}}
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xs-6 col-sm-6 widget-container-col">
                                        <div class="form-group">
                                        </div>
                                    </div>
                                </div>
                                <div class="row margin_top">
                                    <div class="col-xs-12 col-sm-12 widget-container-col">
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label no-padding-right">
                                                單備註：
                                            </label>
                                            <div class="col-sm-10">
                                                <textarea class="form-control" ng-model="order.orders.messageSeller"
                                                    style="height: 200px"></textarea>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="widget-toolbox padding-8 clearfix noPrint">
                                <button class="btn btn-sm btn-import pull-right margin_left"
                                    ng-click="print(1)">列印連鎖代送出貨單</button>
                                <button class="btn btn-sm btn-import pull-right margin_left"
                                    ng-click="print(0)">列印空白連鎖代送出貨單</button>                                    
                                 <button class="btn btn-sm btn-dele pull-right margin_left" ng-click="turnBackChainOrder()">
                                 <i class="ace-icon fa fa-pencil-square-o"></i>退回採購單</button>
                                <button class="btn btn-sm btn-save pull-right margin_left" ng-click="save()"
                                        ng-hide="rootUser.adminType == 2">暫存</button>
                                <div ng-if=" seller.vendorReceiptId != null && seller.vendorReceiptId != ''">
                                    <div ng-if=" order.orderReceipt  == null">
                                        <button class="btn btn-sm btn-import pull-right margin_left"
                                            ng-click="openInoice()">
                                            電子發票開立
                                        </button>
                                    </div>
                                    <div ng-if=" order.orderReceipt  != null">
                                        <button class="btn btn-sm btn-import pull-right margin_left"
                                            ng-click="cancelInvoice()">
                                            電子發票作廢
                                        </button>
                                        <button class="btn btn-sm btn-import pull-right margin_left"
                                            ng-click="getInvoicPDF()">
                                            列印電子發票
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>